@model CaseManagement.ViewModels.ViewUpdateCaseModel

<div class="row">
    <div class="col-12 mx-auto text-center">
        <section>
            <div class="col-4 mx-auto text-center">
                <h4>Case: @Model.Number</h4>
                <hr />
                @if (Model.CaseUpdatedSuccessfully == true)
                {
                    <div class="alert alert-dismissible alert-success">
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                        <strong>Case updated successfully.</strong>
                    </div>
                }
            </div>
            <form asp-action="Update" method="post">
                <input type="hidden" asp-for="Id" />
                <div class="row">
                    <div class="form-group col-4">
                        <fieldset disabled="">
                            <label class="control-label" for="disabledInput">Created on</label>
                            <input class="form-control" id="disabledInput" type="text" value="@Model.CreatedOn" disabled="">
                        </fieldset>
                    </div>
                    <div class="form-group col-4">
                        <label>Case number</label>
                        <input asp-for="Number" class="form-control" />
                        <span asp-validation-for="Number" class="text-danger"></span>
                    </div>
                    <div class="form-group col-4">
                        <label>Status</label>
                        <select asp-for="Status" class="form-control">
                            <option>Select status</option>
                        </select>
                        <span asp-validation-for="Status" class="text-danger"></span>
                    </div>
                    <div class="form-group col-4">
                        <label>Priority</label>
                        <select asp-for="Priority" class="form-control">
                            <option>Select priority</option>
                        </select>
                        <span asp-validation-for="Priority" class="text-danger"></span>
                    </div>
                    <div class="form-group col-4">
                        <label>Subject</label>
                        <input asp-for="Subject" type="text" class="form-control" />
                        <span asp-validation-for="Subject" class="text-danger"></span>
                    </div>
                    <div class="form-group col-4">
                        <label>Type</label>
                        <select asp-for="Type" class="form-control">
                            <option>Select type</option>
                        </select>
                        <span asp-validation-for="Type" class="text-danger"></span>
                    </div>
                    <div class="form-group col-4">
                        <label>Phase</label>
                        <select asp-for="Phase" class="form-control">
                            <option>Select phase</option>
                        </select>
                        <span asp-validation-for="Phase" class="text-danger"></span>
                    </div>
                    <div class="form-group col-4">
                        <label>Description</label>
                        <textarea asp-for="Description" class="form-control" rows="1"></textarea>
                        <span asp-validation-for="Description" class="text-danger"></span>
                    </div>
                </div>
                <button type="submit" class="btn btn-outline-dark">UPDATE</button>
            </form>
        </section>
    </div>
</div>

<div class="col-md-4 mx-auto text-center mt-5">
    <section>
        <h4>Tasks</h4>
        <hr />
        @if (Model.TaskCreatedSuccessfully == true)
        {
            <div class="alert alert-dismissible alert-success">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>Task created successfully.</strong>
            </div>
        }
        @if (Model.TaskUpdatedSuccessfully == true)
        {
            <div class="alert alert-dismissible alert-success">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>Task updated successfully.</strong>
            </div>
        }
        <a class="btn btn-info" asp-controller="Tasks" asp-action="Create" asp-route-id="@Model.Id">Create Task</a>
    </section>
</div>

<div id="tasks-table" class="text-center">
    <table class="table table-hover border">
        <thead>
            <tr class="table-active">
                <th scope="col">Created on</th>
                <th scope="col">Type</th>
                <th scope="col">Status</th>
                <th scope="col">Owner</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var taskModel in Model.Tasks)
            {
                <tr>
                    <td>@taskModel.CreatedOn</td>
                    <td>@taskModel.Type</td>
                    <td>@taskModel.Status</td>
                    <td>@taskModel.Owner</td>
                    <td><a class="btn btn-warning p-1" asp-controller="Tasks" asp-action="ViewUpdate" asp-route-id="@taskModel.Id">VIEW/UPDATE</a></td>
                </tr>
            }
        </tbody>
    </table>
    @if (Model.Tasks.Length == 0)
    {
        <h6>No tasks available.</h6>
    }
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
